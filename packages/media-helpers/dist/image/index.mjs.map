{"version":3,"sources":["../../src/image/view/ImageView.tsx","../../src/image/view/ImageViewProviderContext.tsx","../../src/image/view/ImageViewProvider.tsx"],"sourcesContent":["import { Ellipsis, X } from 'lucide-react'\nimport { useState } from 'react'\nimport { useImageView } from './ImageViewProviderContext'\n\ntype ImageViewProps = {\n    src: string\n    alt: string\n}\n\nexport function ImageView({ src, alt }: ImageViewProps) {\n    const [status, setStatus] = useState<'loading' | 'loaded' | 'error'>(\n        'loading',\n    )\n    const [imgClassNames, setImgClassNames] = useState<object>({\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n    })\n    const { transformImageUrlFn } = useImageView()\n    const imageSrc = transformImageUrlFn ? transformImageUrlFn(src) : src\n    return (\n        <div className=\"w-full h-full relative\">\n            <img\n                src={imageSrc}\n                alt={alt}\n                style={imgClassNames}\n                onLoad={() => {\n                    setStatus('loaded')\n                    setImgClassNames({\n                        width: '100%',\n                        height: '100%',\n                        objectFit: 'cover',\n                    })\n                }}\n                onError={() => {\n                    setStatus('error')\n                    setImgClassNames({\n                        width: '0',\n                        height: '0',\n                        objectFit: 'cover',\n                    })\n                }}\n            />\n            {status === 'loading' && (\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <Ellipsis className=\"h-4 w-4 animate-pulse\" />\n                </div>\n            )}\n            {status === 'error' && (\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <X className=\"h-4 w-4\" />\n                </div>\n            )}\n        </div>\n    )\n}\n","import { createContext, useContext } from 'react'\r\n\r\nexport type TransformImageUrlFn = (storageId: string) => string\r\n\r\nconst defaultTransform: TransformImageUrlFn = (storageId: string) => storageId\r\n\r\nconst ImageViewContext = createContext<{\r\n  transformImageUrlFn: TransformImageUrlFn\r\n}>({\r\n  transformImageUrlFn: defaultTransform,\r\n})\r\n\r\nexport const useImageView = () => useContext(ImageViewContext)\r\n\r\nexport default ImageViewContext\r\n","import React from 'react'\r\nimport type { TransformImageUrlFn } from './ImageViewProviderContext'\r\nimport ImageViewContext from './ImageViewProviderContext'\r\n\r\ntype ImageViewProviderProps = {\r\n  transformImageUrlFn?: TransformImageUrlFn\r\n  children: React.ReactNode\r\n}\r\n\r\nexport function ImageViewProvider({\r\n  transformImageUrlFn,\r\n  children,\r\n}: ImageViewProviderProps) {\r\n  const fn = transformImageUrlFn ?? ((id: string) => id)\r\n  return (\r\n    <ImageViewContext.Provider value={{ transformImageUrlFn: fn }}>\r\n      {children}\r\n    </ImageViewContext.Provider>\r\n  )\r\n}\r\n\r\nexport default ImageViewProvider\r\n"],"mappings":";;;AAAA,SAAS,UAAU,SAAS;AAC5B,SAAS,gBAAgB;;;ACDzB,SAAS,eAAe,kBAAkB;AAI1C,IAAM,mBAAwC,CAAC,cAAsB;AAErE,IAAM,mBAAmB,cAEtB;AAAA,EACD,qBAAqB;AACvB,CAAC;AAEM,IAAM,eAAe,MAAM,WAAW,gBAAgB;AAE7D,IAAO,mCAAQ;;;ADOP,SACI,KADJ;AAZD,SAAS,UAAU,EAAE,KAAK,IAAI,GAAmB;AACpD,QAAM,CAAC,QAAQ,SAAS,IAAI;AAAA,IACxB;AAAA,EACJ;AACA,QAAM,CAAC,eAAe,gBAAgB,IAAI,SAAiB;AAAA,IACvD,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,WAAW;AAAA,EACf,CAAC;AACD,QAAM,EAAE,oBAAoB,IAAI,aAAa;AAC7C,QAAM,WAAW,sBAAsB,oBAAoB,GAAG,IAAI;AAClE,SACI,qBAAC,SAAI,WAAU,0BACX;AAAA;AAAA,MAAC;AAAA;AAAA,QACG,KAAK;AAAA,QACL;AAAA,QACA,OAAO;AAAA,QACP,QAAQ,MAAM;AACV,oBAAU,QAAQ;AAClB,2BAAiB;AAAA,YACb,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,WAAW;AAAA,UACf,CAAC;AAAA,QACL;AAAA,QACA,SAAS,MAAM;AACX,oBAAU,OAAO;AACjB,2BAAiB;AAAA,YACb,OAAO;AAAA,YACP,QAAQ;AAAA,YACR,WAAW;AAAA,UACf,CAAC;AAAA,QACL;AAAA;AAAA,IACJ;AAAA,IACC,WAAW,aACR,oBAAC,SAAI,WAAU,qDACX,8BAAC,YAAS,WAAU,yBAAwB,GAChD;AAAA,IAEH,WAAW,WACR,oBAAC,SAAI,WAAU,qDACX,8BAAC,KAAE,WAAU,WAAU,GAC3B;AAAA,KAER;AAER;;;AEvDA,OAAkB;AAed,gBAAAA,YAAA;AANG,SAAS,kBAAkB;AAAA,EAChC;AAAA,EACA;AACF,GAA2B;AACzB,QAAM,KAAK,wBAAwB,CAAC,OAAe;AACnD,SACE,gBAAAA,KAAC,iCAAiB,UAAjB,EAA0B,OAAO,EAAE,qBAAqB,GAAG,GACzD,UACH;AAEJ;","names":["jsx"]}